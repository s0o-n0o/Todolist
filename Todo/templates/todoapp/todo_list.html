{% extends 'todoapp/index.html' %}
{% load static %}
<link rel="stylesheet" href="{% static "css/todo_list.css" %}">
{% load widget_tweaks%}
{% block title %}Todo一覧画面 {{block.super}}{% endblock%}

{% block content %}
    <header class ="p-1">
        <div class="d-flex justify-content-left">

        {% comment %} Todo 追加 {% endcomment %}
        <a type="submit" class="ms-2 btn btn-primary" href="{% url 'TodoApp:add_todo' pk=pk %}">+追加</a>
        

            <div class="ms-3 dropdown">
                <a class="btn btn-primary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    並べ替え
                </a>
                <ul class="dropdown-menu">
                    <li><a type="submit" class="dropdown-item ms-1 btn btn-primary" href="{% url 'TodoApp:priority_sort'  pk=pk%}">優先度</a></li>
                    <li><a type="submit" class="dropdown-item ms-1 btn btn-primary" href="{% url 'TodoApp:deadline_sort' pk=pk%}">期限</a></li>
                </ul>
            </div>
        <a type="submit" class="ms-2 btn btn-primary" href="{% url 'TodoApp:todo_home'  %}">戻る</a>

        </div>



    </header>
    <h1>{{list_name}}</h1>

    <div class='mt-5 ms-2'>
        {% if messages %}
            {% for message in messages %}
                <h3>{{message}}</h3>
            {% endfor%}
        {% endif %}

    <table class="table table-light table-hover   ms-2">
        <thead>
            <tr>
                <th scope="col"  style="width: 15%">進捗</th>
                <th scope="col">タイトル</th>
                <th scope="col">期限</th>
                <th scope="col">優先度</th>
                <th scope="col"><img src="{% static "img/trash.png" %}" height="20" width="40"></th>
                
            </tr>
        </thead>
        <tbody>
    {% for todo in not_done_list %}
            <tr class="table-light" id="not_done">
                <td>   
                {% if todo.status == False%}
                <a href="{% url 'TodoApp:change_status' pk=pk id=todo.id status=todo.status %}">未完了</a>
                {% else%}
                    <a href="{% url 'TodoApp:change_status' pk=pk id=todo.id status=todo.status %}">完了</a>
                {% endif %}
                </td> 
                <td>
                <a href=" {% url 'TodoApp:update_todo' pk=pk id=todo.id %}">{{todo.title}} </a>
                </td>
                <td>
                {{todo.deadline}}  
                </td>
                <td>
                {{todo.priority}} 
                </td>
                <td>
                <a href="{% url 'TodoApp:delete_todo' pk=pk id=todo.id %}">
                <img src="{% static "img/trash.png" %}" height="20" width="40"></a>
                </td>
            </tr>
            {% endfor %}

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

        {% for todo in done_list %}
            <tr class="table-light " id = "done">
                <td>   
                {% if todo.status == False%}
                <a href="{% url 'TodoApp:change_status' pk=pk id=todo.id status=todo.status %}">未完了</a>
                {% else%}
                    <a href="{% url 'TodoApp:change_status' pk=pk id=todo.id status=todo.status %}">完了</a>
                {% endif %}
                </td> 
                <td>
                <a href=" {% url 'TodoApp:update_todo' pk=pk id=todo.id %}">{{todo.title}} </a>
                </td>
                <td>
                {{todo.deadline}}  
                </td>
                <td>
                {{todo.priority}} 
                </td>
                <td>
                <a href="{% url 'TodoApp:delete_todo' pk=pk id=todo.id %}">
                <img src="{% static "img/trash.png" %}" height="20" width="40"></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    </div>
    
{% endblock %}
